---
title: "An example of set visualisation"
author: "Eliora Henzler"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_knit$set(root.dir = "~/..")
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Below is an example of how to calculate set intersections from the Iraq MSNA 2018 with REACH.

## Vignette Info
The vignette shows how to use the three main functions of the package and the graph you can expect afterward. In this case, we are not interested in single variables (no intersection) and we want to see 10 intersections in total

```{r}
library("Setviz")
library("dplyr")
library("survey")
library("UpSetR")

# data <-read.csv("./data.csv") #load data in the example
varnames <- c("Food",	"Health",	"WASH",	"Education",	"Protection",	"Shelter",	"Livelihoods") #fix the names that you want intersections for 
```


## Calculating intersections and making the plot, using make_set_percentages

```{r, fig.show='hold'}
make_set_percentages_plot(data, varnames, "weight_nat", 10, exclude_unique = T, "PIN_Intersections")
```

## Calculating intersections

Next, use the functions to get the intersections

```{r, eval=  FALSE}
intersects <- expand_to_set_intersections(data, varnames)
head(intersects$data[,c(20:25)]) ## Get an overview of the intersected sets

```


```{r, eval=  FALSE}
expanded_df <- add_set_intersection_to_df(data, varnames, exclude_unique = T)
head(expanded_df$data)
```
